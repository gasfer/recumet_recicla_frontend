<p-dialog [header]="'AsignaciÃ³n de sucursales'" [(visible)]="productsService.showModalSucursales"
    [modal]="true" [breakpoints]="{ '960px': '75vw', '576px': '95%' }" [style]="{ width: '45vw' }" [draggable]="false"
    [resizable]="false" (onShow)="this.getProductAndSucursal();"
    [dismissableMask]="true">
    <form >
        <app-alert-notify [subTitle]="'Marca las sucursales a asignar'" [required]="false" [subTitle2]="''"></app-alert-notify>
        <div class="d-flex text-center justify-content-center align-content-center align-items-center"  *ngIf="this.loading()">
            <app-loading class="m-0" [ngStyle]="{'width': '250px'}"></app-loading>
        </div>
        <p-table *ngIf="!this.loading()"   [value]="sucursales()" [styleClass]="'p-datatable-sm'">
            <ng-template pTemplate="header">
                <tr>
                    <th  class="text-white" style="min-width:20px;max-width:20px; background-color: var(--bg-primary)" >SELEC.</th>
                    <th  class="text-white" style="min-width:70px; max-width:70px; background-color: var(--bg-primary)">NOMBRE</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-sucursal>
                <tr>
                    <td style="min-width:20px;max-width:20px;">
                        <button
                            pButton
                            pTooltip="Asignar"
                            tooltipPosition="bottom"
                            (click)="assignSucursal(sucursal)"
                            pRipple
                            [icon]="sucursal.select ? 'fa-solid fa-circle-check' : 'fa-regular fa-circle-check'"
                            class="p-button-rounded"
                            [ngClass]="{
                                'p-button-outlined' : !sucursal.select ,
                            }"
                        ></button>
                    </td>
                    <td  style="text-align: left; white-space:normal; min-width:70px;max-width:70px;" >{{ sucursal.name }}</td>
                </tr>
            </ng-template>
        </p-table>
    </form>
    <ng-template pTemplate="footer">
        <p-button (click)="!loading() && !loadingSubmit() ? saveAssignSucursales() : null" styleClass="p-button-sm p-button-rounded"
            label="Guardar" icon="fa-solid fa-floppy-disk" [loading]="loading() || loadingSubmit()"></p-button>
        <p-button (click)="productsService.showModalSucursales = false" label="Cancelar" styleClass="p-button-outlined p-button-sm p-button-rounded"></p-button>
    </ng-template>
</p-dialog>